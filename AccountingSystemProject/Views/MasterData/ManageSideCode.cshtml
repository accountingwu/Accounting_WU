
@model IEnumerable<AccountingSystemProject.DAL.EMSide>
@using AccountingSystemProject.Models
@{
    ViewBag.Title = "ManageSideCode";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<style type="text/css">
    .DetailsRequired {
        font-size: 15px;
        color: red;
    }

    .bg {
        background-color: lightgrey;
    }
    #head {
        
        padding: 1px;
    }
    tr {
        border-bottom: 1px solid #ddd;
    }
    tr:nth-child(even) {
        background-color: #f2f2f3;
    }
    th {
        background-color: lightgrey;
        color: black;
    }
</style>


<!--<div class="container-fluid">
    <h3>เพิ่ม/แก้ไขรหัสแผนก</h3>
    <div class="btn-group" style="float: right">
        <input type="submit" value="New" class="btn btn-primary btn-sm" id="new" />
        <input type="submit" value="Save" class="btn btn-primary btn-sm" id="Save" />
        <input type="submit" value="เพิ่ม" class="btn btn-primary btn-sm" id="insert" />
        <input type="submit" value="Delete" class="btn btn-primary btn-sm" id="Delete" />
        <input type="submit" value="Find" class="btn btn-primary btn-sm" id="Find" />
        <input type="submit" value="Refresh" class="btn btn-primary btn-sm" id="Refresh" />
        <input type="submit" value="Preview" class="btn btn-primary btn-sm" id="Preview" />
        <input type="submit" value="Print" class="btn btn-primary btn-sm" id="Print" />
    </div>
</div>

<div class="btn-group" style="float: right">

    <input type="submit" value="New" class="btn btn-primary btn-sm" id="new" />
    <input type="submit" value="Save" class="btn btn-primary btn-sm" id="Save" />
    <input type="submit" value="เพิ่ม" class="btn btn-primary btn-sm" id="insert" />
    <input type="submit" value="Delete" class="btn btn-primary btn-sm" id="Delete" />
    <input type="submit" value="Find" class="btn btn-primary btn-sm" id="Find" />
    <input type="submit" value="Refresh" class="btn btn-primary btn-sm" id="Refresh" />
    <input type="submit" value="Preview" class="btn btn-primary btn-sm" id="Preview" />
    <input type="submit" value="Print" class="btn btn-primary btn-sm" id="Print" />

    <asp:TextBox runat="server" type="button" ID="New" class="btn btn-default">New</asp:TextBox>
    <asp:Button ID="btnSave" runat="server" Text="Save" OnClick="btnSave_Click" class="btn btn-default" ValidationGroup="login" />        <asp:TextBox runat="server" type="button" ID="Delete" class="btn btn-default">Delete</asp:TextBox>
    <asp:TextBox runat="server" type="button" ID="Find" class="btn btn-default">Find</asp:TextBox>
    <asp:TextBox runat="server" type="button" ID="refresh" class="btn btn-default">Refresh</asp:TextBox>
    <asp:TextBox runat="server" type="button" ID="print" class="btn btn-default">Print</asp:TextBox>
</div> -->
<div class="container-fluid " >
    <h3>เพิ่ม/แก้ไขรหัสฝ่าย</h3>
    <div class="table-responsive table-hover" id="side">
        <table class="table" >
            <thead>
                <tr>
                    <th>รหัสฝ่าย</th>
                    <th>ชื่อฝ่าย</th>
                    <th>ชื่อฝ่าย(Eng)</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var Side in Model)
                {
                    <tr>
                        <td data-id="@Side.SideID">
                            @Html.DisplayFor(modelItem => Side.SideCode)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => Side.SideName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => Side.SideNameEng)
                        </td>

                    </tr>
                }
            </tbody>
            
        </table>
    </div>
</div>

<div class="container-fluid">
    <div class="bg">

        <div class="btn-group" style="float: right">
            <input type="submit" value="New" class="btn btn-primary btn-sm" id="new" />
            <input type="submit" value="Save" class="btn btn-primary btn-sm" id="Save" />
            <input type="submit" value="เพิ่ม" class="btn btn-primary btn-sm" id="insert" />
            <input type="submit" value="Delete" class="btn btn-primary btn-sm" id="Delete" />
            <input type="submit" value="Find" class="btn btn-primary btn-sm" id="Find" />
            <input type="submit" value="Refresh" class="btn btn-primary btn-sm" id="Refresh" />
            <input type="submit" value="Preview" class="btn btn-primary btn-sm" id="Preview" />
            <input type="submit" value="Print" class="btn btn-primary btn-sm" id="Print" />
        </div>
        <br /><br /><br />


   
            <form action="" id="submit">
                <input type="hidden" name="SideID" id="SideID" value="" />
                <div class="row">
                    <div class="col-md-2"></div>
                    <div class="col-md-1" id="head">รหัสฝ่าย : </div>
                    <div class="col-md-4" id="head">
                        <input class="form-control" placeholder="รหัสฝ่าย" name="SideCode" ID="SideCode" />
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-2"></div>
                    <div class="col-md-1" id="head">ชื่อฝ่าย : </div>
                    <div class="col-md-4" id="head">
                        <input class="form-control" placeholder="ชื่อฝ่าย" name="SideName" ID="SideName" />
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-2"></div>
                    <div class="col-md-1" id="head">ชื่อฝ่าย(Eng): </div>
                    <div class="col-md-4" id="head">
                        <input class="form-control" placeholder="ชื่อฝ่าย(Eng)" name="SideNameEng" ID="SideNameEng" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2"></div>
                    <div class="col-md-1" id="head">หมายเหตุ: </div>
                    <div class="col-md-4" id="head">
                        <input class="form-control" placeholder="หมายเหตุ" name="Remark" ID="Remark" />
                    </div>
                </div>
                <br />
                <br />
            </form>
        </div>
    </div>

<!--
<div class="container-fluid container-fluid">
    <br />


    <%--<div class="table-responsive">


        <asp:gridview runat="server" id="GridSide" AutoGenerateColumns="False" DataKeyNames="SideID" DataSourceID="DataTest1" Height="131px" Width="601px" BackColor="White" BorderColor="#999999" BorderStyle="None" BorderWidth="1px" CellPadding="3" GridLines="Vertical" OnSelectedIndexChanged="GridSide_SelectedIndexChanged">
            <AlternatingRowStyle BackColor="#DCDCDC" />
            <Columns>
                <asp:CommandField ShowSelectButton="True" />
                <asp:BoundField DataField="SideCode" HeaderText="รหัสฝ่าย" SortExpression="SideCode" />
                <asp:BoundField DataField="SideName" HeaderText="ชื่อฝ่าย" SortExpression="SideName" />
                <asp:BoundField DataField="SideNameEng" HeaderText="ชื่อฝ่าย(Eng)" SortExpression="SideNameEng" />
                <asp:BoundField DataField="Remark" HeaderText="หมายเหตุ" SortExpression="Remark" />


            </Columns>



            <FooterStyle BackColor="#CCCCCC" ForeColor="Black" />
            <HeaderStyle BackColor="#000084" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#999999" ForeColor="Black" HorizontalAlign="Center" />
            <RowStyle BackColor="#EEEEEE" ForeColor="Black" />
            <SelectedRowStyle BackColor="#008A8C" Font-Bold="True" ForeColor="White" />
            <SortedAscendingCellStyle BackColor="#F1F1F1" />
            <SortedAscendingHeaderStyle BackColor="#0000A9" />
            <SortedDescendingCellStyle BackColor="#CAC9C9" />
            <SortedDescendingHeaderStyle BackColor="#000065" />



        </asp:gridview>

        <br /> <br />


        <%--<asp:SqlDataSource ID="DataTest1" runat="server" ConnectionString="<%$ ConnectionStrings:TestDBConnectionString %>" SelectCommand="SELECT * FROM [EMSide]"></asp:SqlDataSource>--%>


    </div>--%>


    <asp:DropDownList ID="ddlSide" runat="server" AutoPostBack="True" OnSelectedIndexChanged="ddlSide_SelectedIndexChanged">
    </asp:DropDownList>

    <br />

    <div class="row">
        <div class="col-md-3">
            <div style="text-align: left">รหัสฝ่าย</div>
            <asp:TextBox runat="server" ID="SideCode" type="text" class="form-control" name="SideCode" placeholder="รหัส Job"></asp:TextBox>
            <asp:RequiredFieldValidator ID="rfvSideCode" runat="server" ControlToValidate="SideCode"
                                        Display="Dynamic" CssClass="DetailsRequired" ValidationGroup="login" ErrorMessage="Name required!"></asp:RequiredFieldValidator>

        </div>
    </div>
    <br />

    <div class="row">
        <div class="col-md-5">
            <div style="text-align: left">ชื่อฝ่าย</div>
            <asp:TextBox runat="server" ID="SideName" type="text" class="form-control" name="idPlaceDelivery" placeholder="ชื่อ Job"></asp:TextBox>
            <asp:RequiredFieldValidator ID="rfvSideName" runat="server" ControlToValidate="SideName"
                                        Display="Dynamic" CssClass="DetailsRequired" ValidationGroup="login" ErrorMessage="Name required!"></asp:RequiredFieldValidator>

        </div>
    </div>
    <br />

    <div class="row">
        <div class="col-md-5">
            <div style="text-align: left">ชื่อฝ่าย(Eng)</div>
            <asp:TextBox runat="server" ID="SideNameEng" type="text" class="form-control" name="SideNameEng" placeholder="ชื่อ Job(Eng)"></asp:TextBox>
            <asp:RequiredFieldValidator ID="rfvSideNameEng" runat="server" ControlToValidate="SideNameEng"
                                        Display="Dynamic" CssClass="DetailsRequired" ValidationGroup="login" ErrorMessage="Name required!"></asp:RequiredFieldValidator>
        </div>
    </div>
    <br />

    <div class="row">
        <div class="col-md-5">
            <div style="text-align: left">หมายเหตุ</div>
            <asp:TextBox runat="server" class="form-control" id="Remark" placeholder="หมายเหตุ"></asp:TextBox>
            <asp:RequiredFieldValidator ID="rfvRemark" runat="server" ControlToValidate="Remark"
                                        Display="Dynamic" CssClass="DetailsRequired" ValidationGroup="login" ErrorMessage="Name required!"></asp:RequiredFieldValidator>

        </div>
    </div>

    </div> -->


@section scripts {

    <script>



        $("div#side table").delegate('tr', 'click', function () {
            var id = $(this).find("td:first").data("id");
            if (id != null) {
                $.ajax({
                    url: 'ShowTableSide',
                    type: 'post',
                    data: {
                        'id': id
                    },
                    dataType: "json",
                    success: function (data) {
                        $('#SideID').val(data.SideID);
                        $('#SideCode').val(data.SideCode);
                        $('#SideName').val(data.SideName);
                        $('#SideNameEng').val(data.SideNameEng);
                        $('#Remark').val((data.Remark == null) ? "" : data.Remark);
                    }
                });
            } else {
                $('#SideID').val("");
                $('#SideCode').val("");
                $('#SideName').val("");
                $('#SideNameEng').val("");
                $('#Remark').val("");
            }
        })

         $("#insert").click(function () {

            $.ajax({
                type: "POST",
                url: '@Url.Action("insertSide", "MasterData")',
                data: JSON.stringify({
                    SideID: $("#SideID").val(),
                    SideCode: $("#SideCode").val(),
                    SideName: $("#SideName").val(),
                    SideNameEng: $("#SideNameEng").val(),
                    Remark: $("#Remark").val()
                }),
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                processData: false,
                success: function (response) {

                    console.log();
                }
            })
            });

        $("#Save").click(function () {

            $.ajax({
                type: "POST",
                url: '@Url.Action("EditSide", "MasterData")',
                data: JSON.stringify({
                    SideID: $("#SideID").val(),
                    SideCode: $("#SideCode").val(),
                    SideName: $("#SideName").val(),
                    SideNameEng: $("#SideNameEng").val(),
                    Remark: $("#Remark").val()
                }),
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                processData: false,
                success: function (response) {

                    console.log();
                }
            })
        });

        $("#Delete").click(function () {

            $.ajax({
                type: "POST",
                url: '@Url.Action("DeleteSide", "MasterData")',
                data: JSON.stringify({
                    SideID: $("#SideID").val(),
                    SideCode: $("#SideCode").val(),
                    SideName: $("#SideName").val(),
                    SideNameEng: $("#SideNameEng").val(),
                    Remark: $("#Remark").val()
                }),
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                processData: false,
                success: function (response) {

                    console.log();
                }
            })
            });


    </script>
}




